<% content_for :head do %>
  <script src="/assets/codemirror/lib/codemirror.js"></script>
  <link rel="stylesheet" href="/assets/codemirror/lib/codemirror.css">
  <script src="/assets/codemirror/mode/xml/xml.js"></script>
  <script src="/assets/codemirror/mode/javascript/javascript.js"></script>
  <script src="/assets/codemirror/mode/css/css.js"></script>
  <script src="/assets/codemirror/mode/htmlmixed/htmlmixed.js"></script>
<% end %>

<% content_for :last do %>
  <script>
    var ta = document.getElementById('code');
    var editor = CodeMirror.fromTextArea(ta, {
      mode: 'text/html',
      tabMode: 'indent',
      lineNumbers: true,
      lineWrapping: true,
      smartIndent: true
    });
    editor.setSize(null,800);
  </script>
<% end %>

<%= form_page_header('page') %>

<%= error_messages_for(@page) %>

<%= form_for @page do |f| %>
  <%= f.label :title %>
  <%= f.text_field :title, autofocus: true %>
  <%= f.label :slug %>
  <%= f.text_field :slug %>
  <%= f.label :content %>
  <%= f.text_area :content, id: 'code' %>
  <label>
    <%= f.check_box :published %> Published
  </label>
  <%= f.submit nil, class: 'button submit-button' %> or <%= link_to 'Cancel', pages_path %>
<% end %>